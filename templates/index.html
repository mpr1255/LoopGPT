<!DOCTYPE html>
<html>
<head>
    <title>ChatGPT Utility</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<style>
  .thick-border {
    border: 2px solid #ccc;
    border-radius: 5px;
  }
  .form-label {
    font-weight: bold;
    margin-top: 1em;
  }
  .container {
    max-width: 1100px;
    margin: auto;
  }
  .btn-primary {
    background-color: #007bff;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 5px;
  }
</style>

</head>
<body>

<div class="container">
  <div class="row">
    <div class="col-md-6">
      <form id="mainForm">
        <div class="mb-3">
          <label for="model" class="form-label">Model:</label>
          <select id="model" name="model" class="form-control thick-border">
            <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
            <option value="gpt-4">gpt-4</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="api_key" class="form-label">API Key:</label>
          <input type="text" id="api_key" name="api_key" class="form-control thick-border">
        </div>
        <div class="mb-3">
          <label for="prompt" class="form-label">Prompt:</label>
          <textarea id="prompt" name="prompt" class="form-control thick-border"></textarea>
        </div>
        <div class="mb-3">
          <label for="text" class="form-label">Text:</label>
          <textarea id="text" name="text" class="form-control thick-border"></textarea>
        </div>
        <button type="button" onclick="submitForm()" class="btn btn-primary">Submit</button>
      </form>
    </div>
    <div class="col-md-6">
      <div id="output" class="thick-border rounded p-3" style="height: 500px; overflow-y: auto; resize: both;"></div>
    </div>
  </div>
</div>

<script>
async function submitForm() {
    const apiKey = document.getElementById("api_key").value;
    const prompt = document.getElementById("prompt").value;
    const text = document.getElementById("text").value;
    const model = document.getElementById("model").value;
    
    const response = await fetch('/process', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({model: model, api_key: apiKey, prompt: prompt, text: text})
    });

    const jsonResponse = await response.json();
    document.getElementById("output").innerHTML = jsonResponse.output;
}

</script>

</body>
</html>
